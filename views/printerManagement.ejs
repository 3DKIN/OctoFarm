<!--Printer Management-->
<div class="row">
    <div id="printerManager" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
        <div class="card text-white bg-dark">
            <div class="card-header dashHeader p-0 pt-1 mb-0">
                <button
                        type="button"
                        class="btn btn-secondary"
                        href="#"
                        aria-expanded="false"
                        disabled
                >
                    <i  class="fas fa-print"></i> Printer Management: <%= printerCount %>
                </button>
            </div>
            <div class="card-body p-0">
                <div class="row">
                    <% if(typeof userGroup != "undefined" && userGroup === "Administrator"){ %>
                    <div class="col-lg-3 text-center">
                            <u><h5 class="mb-0">Printer Administration</h5></u><br>
                            <button
                                    title="Add Printer to your Farm"
                                    id="addPrinterBtn"
                                    type="button"
                                    class="tag btn btn-success ml-1 p-1 bg-colour-1"
                                    href="#"
                                    aria-expanded="false"
                            >
                                <i class="fas fa-plus fa-sm"></i> Add
                            </button>
                        <button id="editPrinterBtn" type="button" class="tag btn btn-warning ml-1 p-1 bg-colour-2" data-toggle="modal" data-target="#printerEditModal">
                            <i class="fas fa-edit"></i> Edit
                        </button><br>
                            <form id="uploadFileModalContentForm" class="text-center">
                                <input

                                        class="fileElem"
                                        type="file"
                                        id="importPrinterBtn"
                                        accept=".json"
                                /><label
                                        title="Import printers from a json file"
                                        class="tag btn btn-primary mt-2 ml-1 mb-0 p-1 bg-colour-3"
                                        for="importPrinterBtn"
                                ><i class="fas fa-file-import"></i> Import</label
                                >
                            </form>
                            <button
                                    title="Export printers from OctoFarm"
                                    id="exportPrinterBtn"
                                    type="button"
                                    class="tag btn btn-info ml-1 p-1 mt-2 bg-colour-4"
                                    href="#"
                                    aria-expanded="false"
                            >
                                <i class="fas fa-file-export"></i> Export
                            </button>
                        <button
                                title="Delete Printers from your farm"
                                id="deletePrintersBtn"
                                type="button"
                                class="tag btn btn-primary ml-1 p-1 mt-2 bg-colour-1"
                                href="#"
                                aria-expanded="false"
                                data-toggle="modal" data-target="#printerEditModal"
                        >
                            <i class="fas fa-trash"></i> Delete
                        </button><br>
                        <button
                                title="Delete Printers from your farm"
                                id="saveAllBtn"
                                type="button"
                                class="tag btn btn-success ml-1 p-1 mt-2 d-none"
                                href="#"
                        >
                            <i class="fas fa-trash"></i> Save All
                        </button>



                    </div>
                   <% }%>
                    <div class="col-lg-3 text-center">
                        <u><h5 class="mb-0">Bulk Actions</h5></u><br>
                        <button
                                title="Connect multiple Printers at once."
                                id="bulkConnectBtn"
                                type="button"
                                class="tag btn btn-primary ml-1 p-1 bg-colour-1"
                                href="#"
                                aria-expanded="false"
                                data-toggle="modal" data-target="#printerEditModal"
                        >
                            <i class="fas fa-link"></i> Connect
                        </button>
                        <button
                                title="Diconnect multiple Printers at once."
                                id="bulkDisconnectBtn"
                                type="button"
                                class="tag btn btn-primary ml-1 p-1 bg-colour-2"
                                href="#"
                                aria-expanded="false"
                                data-toggle="modal" data-target="#printerEditModal"
                        >
                            <i class="fas fa-unlink"></i> Disconnect
                        </button>
                        <button
                                title="Power On/Off multiple Printers at once."
                                id="bulkPowerBtn"
                                type="button"
                                class="tag btn btn-primary ml-1 p-1 bg-colour-3"
                                href="#"
                                aria-expanded="false"
                                data-toggle="modal" data-target="#printerEditModal"
                        >
                            <i class="fas fa-power-off"></i> Power
                        </button>
                        <button
                                title="Re-Sync multiple Printers in your farm at once. This has no bearing on Active Prints!"
                                id="searchOfflineBtn"
                                type="button"
                                class="tag btn btn-success ml-1 p-1 bg-colour-4"
                                href="#"
                        >
                            <i class="fas fa-redo fa-sm"></i> Re-Sync
                        </button>
                    </div>
                        <div class="col-lg-3 text-center">
                            <u><h5 class="mb-0"></h5></u><br>

                        </div>
                    <div class="col-lg-3 text-center">
                        <u><h5 class="mb-0 pb-1">Connection Log</h5></u>
                        <div id="printerTickerMessageBox" class="bg-secondary" style="height:150px; max-height:150px; overflow-y: scroll;">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-12 table-responsive-sm table-responsive-md" >
        <table id="printerNewTable" class="table table-dark table-striped text-center d-none">
            <thead>
            <tr>
                <th scope="col" class="d-none sticky-table table-dark">Select</th>
                <th class="table-dark text-wrap">Name</th>
                <th scope="col" class="table-dark" width="190px">Group</th>
                <th scope="col" class="table-dark">Printer URL</th>
                <th scope="col" class="table-dark">Camera URL</th>
                <th scope="col" class="table-dark">API KEY</th>
                <th scope="col" class="table-dark"></th>
            </tr>
            </thead>
            <tbody id="printerNewList" style="height:100%; overflow-y:auto;">
            </tbody>
        </table>
    </div>
</div>
<div class="row">
    <div class="col-lg-12 table-responsive-sm table-responsive-md" >
        <table id="printerTable" class="table table-dark table-striped text-center">
            <thead>
            <tr>
                <th scope="col" class=" sticky-table table-dark">Sort Index</th>
                <th scope="col" class="d-none  sticky-table table-dark">Select</th>
                <th class=" sticky-table table-dark text-wrap">Name</th>
                <th scope="col" class=" sticky-table table-dark" style="min-width:300px;">Actions</th>
                <th scope="col" class=" sticky-table table-dark" style="width:50px;">Host State</th>
                <th scope="col" class=" sticky-table table-dark">Printer State</th>
                <th scope="col"  class=" sticky-table table-dark"style="min-width:10px;">WebSocket</th>
                <th scope="col" class=" sticky-table table-dark">Group</th>
                <th scope="col" class=" sticky-table table-dark" style="min-width:50px;">OctoPrint Version</th>
                <th scope="col" class=" sticky-table table-dark"></th>
            </tr>
            </thead>
            <tbody id="printerList" style="height:100%; overflow-y:auto;">
            </tbody>
        </table>
    </div>
</div>
<div class="modal fade" id="printerEditModal" tabindex="0" role="dialog" aria-labelledby="printerEditModal" aria-hidden="true" data-keyboard="false">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="printerEditLabel">Printers</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span class="text-white" aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                            <div id="multiPrintersSection" class="col-lg-12">


                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveEditsBtn" class="btn btn-success" data-dismiss="modal" aria-label="Close">Action</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script src="/assets/js/printerManagementRunner.min.js" type="module"></script>
<script src="/assets/js/vendor/dragSort.js"></script>